<div class="movies">
  <section class="movies-container">
    <mat-card
      style="position: relative"
      *ngFor="let movie of movies$ | async; let i = index"
    >
      <div class="movie-header">
        <div>{{ movie.name }}</div>
        <button mat-icon-button (click)="enableEdit(movie, i)">
          <mat-icon style="font-size: 20px; color: '#ddd'">edit</mat-icon>
        </button>
      </div>
      <div class="movie-body">
        <div>{{ movie.releaseDate | date }}</div>
        <ng-template #ear
          ><h3>${{ movie.earning }}</h3></ng-template
        >
        <mat-form-field
          *ngIf="i === selectedIndex; else ear"
          class="example-full-width"
          appearance="fill"
        >
          <mat-label>Earning</mat-label>
          <input
            matInput
            type="number"
            placeholder="Ex. Pizza"
            [(ngModel)]="earning"
          />
        </mat-form-field>
      </div>

      <mat-card-actions>
        <button mat-button (click)="deleteMovie(movie.id)">Delete</button>
        <button mat-button *ngIf="i === selectedIndex" (click)="update(movie)">
          Update
        </button>
        <button mat-button *ngIf="i === selectedIndex" (click)="cancelEdit()">
          Cancel
        </button>
        <button mat-button routerLink="/{{ movie.id }}">Details</button>
      </mat-card-actions>
    </mat-card>
  </section>
</div>
